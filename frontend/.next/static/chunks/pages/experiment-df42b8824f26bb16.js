(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[375],{9195:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/experiment",function(){return n(820)}])},820:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var r=n(7568),s=n(4924),i=n(6042);function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var l=n(943);var c=n(3375);var a=n(1566);function u(e){return function(e){if(Array.isArray(e))return(0,l.Z)(e)}(e)||(0,c.Z)(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var d=n(7582),p=n(5893),h=n(7294),f=n(1163),g=n(8469),x=function(){var e=(0,h.useState)({selected_groups:["llm","ragas"],top_k:5,similarity_threshold:.5}),t=e[0],n=e[1],l=(0,h.useState)(!1),c=l[0],a=l[1],x=(0,h.useState)(0),m=x[0],j=x[1],y=(0,h.useState)([]),v=y[0],b=y[1],_=(0,h.useState)(!1),k=_[0],N=_[1],S=(0,h.useState)(null),w=S[0],O=S[1],C=(0,h.useRef)(null),A=(0,f.useRouter)(),q=(t.selected_groups.includes("llm")?25:0)+(t.selected_groups.includes("ragas")?30:0);(0,h.useEffect)((function(){C.current&&(C.current.scrollTop=C.current.scrollHeight)}),[v]);var T=function(e,t){n((function(n){return o((0,i.Z)({},n),{selected_groups:t?u(n.selected_groups).concat([e]):n.selected_groups.filter((function(t){return t!==e}))})}))},E=function(e,t){n((function(n){return o((0,i.Z)({},n),(0,s.Z)({},e,t))}))},P=function(){var e=(0,r.Z)((function(){var e,n;return(0,d.__generator)(this,(function(r){switch(r.label){case 0:if(0===t.selected_groups.length)return alert("Please select at least one question group"),[2];a(!0),j(0),b([]),N(!1),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,g.xn.run(t)];case 2:return r.sent(),e=new WebSocket("ws://localhost:8000/ws/experiment/stream"),O(e),e.onmessage=function(t){var n=JSON.parse(t.data);"completed"===n.type?(N(!0),a(!1),e.close()):(b((function(e){return u(e).concat([n])})),j((function(e){return Math.min(e+100/q,100)})))},e.onerror=function(e){console.error("WebSocket error:",e),a(!1)},e.onclose=function(){O(null)},[3,4];case 3:return n=r.sent(),console.error("Error starting experiment:",n),a(!1),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),R=function(e){return e>.7?"GOOD":e>.5?"WEAK":"POOR"};return(0,p.jsx)("div",{children:(0,p.jsxs)("div",{className:"card",children:[(0,p.jsx)("h2",{children:"\u2699\ufe0f Experiment Configuration"}),(0,p.jsx)("p",{style:{color:"#666",fontSize:"16px",marginBottom:"30px"},children:"Select question groups to test against corpus"}),(0,p.jsxs)("div",{className:"two-column",children:[(0,p.jsxs)("div",{className:"card",style:{backgroundColor:"#f8f9fa"},children:[(0,p.jsx)("h3",{children:"Question Group Selection"}),(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsxs)("div",{className:"checkbox",children:[(0,p.jsx)("input",{type:"checkbox",id:"llm-questions",checked:t.selected_groups.includes("llm"),onChange:function(e){return T("llm",e.target.checked)},disabled:c}),(0,p.jsx)("label",{htmlFor:"llm-questions",children:"Run LLM Questions (25 questions)"})]}),(0,p.jsxs)("div",{className:"checkbox",children:[(0,p.jsx)("input",{type:"checkbox",id:"ragas-questions",checked:t.selected_groups.includes("ragas"),onChange:function(e){return T("ragas",e.target.checked)},disabled:c}),(0,p.jsx)("label",{htmlFor:"ragas-questions",children:"Run RAGAS Questions (30 questions)"})]}),(0,p.jsxs)("div",{className:"checkbox",children:[(0,p.jsx)("input",{type:"checkbox",id:"both-questions",checked:t.selected_groups.includes("llm")&&t.selected_groups.includes("ragas"),onChange:function(e){e.target.checked?n((function(e){return o((0,i.Z)({},e),{selected_groups:["llm","ragas"]})})):n((function(e){return o((0,i.Z)({},e),{selected_groups:[]})}))},disabled:c}),(0,p.jsxs)("label",{htmlFor:"both-questions",children:["Run Both Groups (",q," total questions)"]})]})]})]}),(0,p.jsxs)("div",{className:"card",style:{backgroundColor:"#f0f8ff"},children:[(0,p.jsx)("h3",{children:"Retrieval Configuration"}),(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{htmlFor:"top-k",children:"Top-K Results:"}),(0,p.jsxs)("select",{id:"top-k",className:"form-control",value:t.top_k,onChange:function(e){return E("top_k",parseInt(e.target.value))},disabled:c,children:[(0,p.jsx)("option",{value:3,children:"3"}),(0,p.jsx)("option",{value:5,children:"5"}),(0,p.jsx)("option",{value:10,children:"10"})]})]}),(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{htmlFor:"similarity-threshold",children:"Similarity Threshold:"}),(0,p.jsxs)("select",{id:"similarity-threshold",className:"form-control",value:t.similarity_threshold,onChange:function(e){return E("similarity_threshold",parseFloat(e.target.value))},disabled:c,children:[(0,p.jsx)("option",{value:.3,children:"0.3"}),(0,p.jsx)("option",{value:.5,children:"0.5"}),(0,p.jsx)("option",{value:.7,children:"0.7"})]})]})]})]}),!c&&!k&&(0,p.jsx)("div",{style:{textAlign:"center",marginTop:"30px"},children:(0,p.jsx)("button",{className:"button",onClick:P,style:{fontSize:"18px",padding:"15px 30px"},disabled:0===t.selected_groups.length,children:"\ud83d\ude80 Start Experiment"})}),c&&(0,p.jsxs)("div",{className:"card",style:{backgroundColor:"#fff3cd",marginTop:"20px"},children:[(0,p.jsx)("h3",{children:"\ud83d\udd04 Experiment Running"}),(0,p.jsx)("div",{className:"progress-bar",children:(0,p.jsx)("div",{className:"progress-fill",style:{width:"".concat(m,"%")}})}),(0,p.jsxs)("div",{style:{textAlign:"center",marginTop:"10px"},children:["Progress: ",Math.round(m),"% (",v.length,"/",q," questions processed)"]}),(0,p.jsx)("div",{style:{textAlign:"center",marginTop:"15px"},children:(0,p.jsx)("button",{className:"button button-secondary",onClick:function(){w&&w.close(),a(!1)},children:"Stop Experiment"})})]}),k&&(0,p.jsxs)("div",{className:"card",style:{backgroundColor:"#d4edda",marginTop:"20px"},children:[(0,p.jsx)("h3",{children:"\u2705 Experiment Completed"}),(0,p.jsxs)("div",{style:{textAlign:"center",color:"#155724"},children:["Successfully processed ",v.length," questions!"]}),(0,p.jsx)("div",{style:{textAlign:"center",marginTop:"15px"},children:(0,p.jsx)("button",{className:"button",onClick:function(){A.push("/results")},style:{fontSize:"16px",padding:"12px 24px"},children:"View Detailed Results \u2192"})})]}),(c||v.length>0)&&(0,p.jsxs)("div",{className:"card",style:{marginTop:"20px"},children:[(0,p.jsx)("h3",{children:"\ud83d\udcca Live Results Preview"}),(0,p.jsxs)("div",{className:"experiment-stream",ref:C,children:[v.map((function(e,t){return(0,p.jsxs)("div",{className:"stream-item",style:{borderBottom:"1px solid #eee",paddingBottom:"10px",marginBottom:"10px"},children:[(0,p.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,p.jsxs)("div",{style:{flex:1},children:[(0,p.jsx)("strong",{children:e.source.toUpperCase()}),": ",e.question]}),(0,p.jsxs)("div",{style:{minWidth:"80px",textAlign:"right",color:(n=e.avg_similarity,n>.7?"#28a745":n>.5?"#ffc107":"#dc3545"),fontWeight:"bold"},children:[e.avg_similarity.toFixed(2)," (",R(e.avg_similarity),")"]})]}),(0,p.jsxs)("div",{style:{fontSize:"0.8rem",color:"#666",marginTop:"5px"},children:["Retrieved ",e.retrieved_docs.length," documents"]})]},t);var n})),c&&0===v.length&&(0,p.jsx)("div",{style:{textAlign:"center",color:"#666",padding:"20px"},children:"Initializing experiment... Please wait."})]})]}),(0,p.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"30px"},children:(0,p.jsx)("button",{className:"button button-secondary",onClick:function(){A.push("/questions")},disabled:c,children:"\u2190 Back to Questions"})})]})})}},8469:function(e,t,n){"use strict";n.d(t,{TO:function(){return i},j9:function(){return o},nc:function(){return c},xn:function(){return l}});var r=n(9669),s=n.n(r)().create({baseURL:"/api",headers:{"Content-Type":"application/json"}}),i={getStatus:function(){return s.get("/corpus/status").then((function(e){return e.data}))}},o={getLLMQuestions:function(){return s.get("/questions/llm").then((function(e){return e.data}))},getRAGASQuestions:function(){return s.get("/questions/ragas").then((function(e){return e.data}))}},l={run:function(e){return s.post("/experiment/run",e).then((function(e){return e.data}))}},c={getAnalysis:function(){return s.get("/results/analysis").then((function(e){return e.data}))}}},943:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3375:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},1566:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(943);function s(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},function(e){e.O(0,[48,774,888,179],(function(){return t=9195,e(e.s=t);var t}));var t=e.O();_N_E=t}]);