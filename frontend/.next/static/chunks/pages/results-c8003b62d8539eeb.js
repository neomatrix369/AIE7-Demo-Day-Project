(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[255],{7592:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/results",function(){return t(354)}])},354:function(e,s,t){"use strict";t.r(s);var r=t(7568),i=t(7582),n=t(5893),l=t(7294),o=t(1163),a=t(8469);s.default=function(){var e=(0,l.useState)(null),s=e[0],t=e[1],c=(0,l.useState)(!0),d=c[0],u=c[1],h=(0,l.useState)(null),x=h[0],p=h[1],f=(0,l.useState)("similarity"),g=f[0],m=f[1],j=(0,l.useState)("desc"),y=j[0],v=j[1],b=(0,l.useState)("all"),k=b[0],S=b[1],w=(0,l.useState)(null),N=w[0],_=w[1],C=(0,o.useRouter)();(0,l.useEffect)((function(){var e=function(){var e=(0,r.Z)((function(){var e,s;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,3,4]),u(!0),[4,a.nc.getAnalysis()];case 1:return e=r.sent(),t(e),[3,4];case 2:return s=r.sent(),p("Failed to load analysis results"),console.error("Error fetching results:",s),[3,4];case 3:return u(!1),[7];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[]);var A=function(e){g===e?v("asc"===y?"desc":"asc"):(m(e),v("desc"))},T=function(e){return e>.7?"similarity-good":e>.5?"similarity-weak":"similarity-poor"},R=l.useMemo((function(){if(!s)return[];var e=s.per_question;return"all"!==k&&(e=e.filter((function(e){return e.status===k}))),e.sort((function(e,s){var t,r;switch(g){case"similarity":t=e.similarity,r=s.similarity;break;case"source":t=e.source,r=s.source;break;case"status":t=e.status,r=s.status;break;default:return 0}return t<r?"asc"===y?-1:1:t>r?"asc"===y?1:-1:0}))}),[s,g,y,k]);return d?(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("h2",{children:"Loading Analysis Results..."}),(0,n.jsx)("div",{style:{textAlign:"center",padding:"40px"},children:(0,n.jsx)("div",{style:{fontSize:"18px",color:"#666"},children:"Please wait..."})})]}):x||!s?(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("h2",{children:"Error Loading Results"}),(0,n.jsx)("div",{style:{color:"#dc3545",padding:"20px"},children:x||"Unknown error occurred"})]}):(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("h2",{children:"\ud83d\udcca Analysis Results Dashboard"}),(0,n.jsx)("p",{style:{color:"#666",fontSize:"16px",marginBottom:"30px"},children:"3-Level infographic analysis results"}),(0,n.jsxs)("div",{className:"analysis-section",children:[(0,n.jsx)("h3",{children:"\ud83d\udcca Overall Analysis"}),(0,n.jsxs)("div",{className:"metric-card",children:[(0,n.jsxs)("div",{className:"stats-grid",children:[(0,n.jsxs)("div",{style:{textAlign:"center"},children:[(0,n.jsx)("div",{style:{fontSize:"2.5rem",fontWeight:"bold",marginBottom:"5px"},children:s.overall.avg_similarity.toFixed(2)}),(0,n.jsx)("div",{style:{fontSize:"1rem",opacity:.9},children:"Average Similarity Score"})]}),(0,n.jsxs)("div",{style:{textAlign:"center"},children:[(0,n.jsxs)("div",{style:{fontSize:"2.5rem",fontWeight:"bold",marginBottom:"5px"},children:[Math.round(100*s.overall.success_rate),"%"]}),(0,n.jsx)("div",{style:{fontSize:"1rem",opacity:.9},children:"Success Rate (>0.7)"})]}),(0,n.jsxs)("div",{style:{textAlign:"center"},children:[(0,n.jsx)("div",{style:{fontSize:"2.5rem",fontWeight:"bold",marginBottom:"5px"},children:s.overall.total_questions}),(0,n.jsx)("div",{style:{fontSize:"1rem",opacity:.9},children:"Questions Processed"})]}),(0,n.jsxs)("div",{style:{textAlign:"center"},children:[(0,n.jsx)("span",{className:"health-indicator ".concat(function(e){switch(e){case"excellent":return"health-excellent";case"good":return"health-good";default:return"health-needs-work"}}(s.overall.corpus_health)),children:s.overall.corpus_health.replace("_"," ")}),(0,n.jsx)("div",{style:{fontSize:"1rem",opacity:.9,marginTop:"10px",color:"white"},children:"Corpus Health"})]})]}),(0,n.jsxs)("div",{style:{textAlign:"center",marginTop:"20px",fontSize:"1.1rem",fontStyle:"italic",opacity:.9},children:["Key Insight: ",s.overall.key_insight]})]})]}),(0,n.jsxs)("div",{className:"analysis-section",children:[(0,n.jsx)("h3",{children:"\ud83d\udcc8 Per Group Analysis"}),(0,n.jsxs)("div",{className:"two-column",children:[(0,n.jsxs)("div",{className:"card",style:{backgroundColor:"#f0f8ff",border:"2px solid #007bff"},children:[(0,n.jsx)("h4",{children:"\ud83e\udd16 LLM Questions Performance"}),(0,n.jsxs)("div",{className:"stats-grid",style:{gridTemplateColumns:"1fr 1fr"},children:[(0,n.jsxs)("div",{className:"stat-item",style:{backgroundColor:"white"},children:[(0,n.jsx)("span",{className:"stat-value",style:{color:"#007bff"},children:s.per_group.llm.avg_score.toFixed(2)}),(0,n.jsx)("div",{className:"stat-label",children:"Average Score"})]}),(0,n.jsxs)("div",{className:"stat-item",style:{backgroundColor:"white"},children:[(0,n.jsx)("span",{className:"stat-value",style:{color:"#007bff"},children:s.per_group.llm.distribution.filter((function(e){return e>.7})).length}),(0,n.jsx)("div",{className:"stat-label",children:"Good Scores (>0.7)"})]})]}),(0,n.jsxs)("div",{style:{marginTop:"15px"},children:[(0,n.jsx)("strong",{children:"Score Distribution:"}),(0,n.jsxs)("div",{style:{display:"flex",height:"20px",backgroundColor:"#e9ecef",borderRadius:"10px",overflow:"hidden",marginTop:"8px"},children:[(0,n.jsx)("div",{style:{backgroundColor:"#28a745",width:"".concat(s.per_group.llm.distribution.filter((function(e){return e>.7})).length/25*100,"%")}}),(0,n.jsx)("div",{style:{backgroundColor:"#ffc107",width:"".concat(s.per_group.llm.distribution.filter((function(e){return e>.5&&e<=.7})).length/25*100,"%")}}),(0,n.jsx)("div",{style:{backgroundColor:"#dc3545",width:"".concat(s.per_group.llm.distribution.filter((function(e){return e<=.5})).length/25*100,"%")}})]}),(0,n.jsxs)("div",{style:{fontSize:"0.8rem",color:"#666",marginTop:"5px"},children:[(0,n.jsx)("span",{style:{color:"#28a745"},children:"\u25a0 Good"})," ",(0,n.jsx)("span",{style:{color:"#ffc107"},children:"\u25a0 Weak"})," ",(0,n.jsx)("span",{style:{color:"#dc3545"},children:"\u25a0 Poor"})]})]})]}),(0,n.jsxs)("div",{className:"card",style:{backgroundColor:"#f8fff8",border:"2px solid #28a745"},children:[(0,n.jsx)("h4",{children:"\ud83d\udcca RAGAS Questions Performance"}),(0,n.jsxs)("div",{className:"stats-grid",style:{gridTemplateColumns:"1fr 1fr"},children:[(0,n.jsxs)("div",{className:"stat-item",style:{backgroundColor:"white"},children:[(0,n.jsx)("span",{className:"stat-value",style:{color:"#28a745"},children:s.per_group.ragas.avg_score.toFixed(2)}),(0,n.jsx)("div",{className:"stat-label",children:"Average Score"})]}),(0,n.jsxs)("div",{className:"stat-item",style:{backgroundColor:"white"},children:[(0,n.jsx)("span",{className:"stat-value",style:{color:"#28a745"},children:s.per_group.ragas.distribution.filter((function(e){return e>.7})).length}),(0,n.jsx)("div",{className:"stat-label",children:"Good Scores (>0.7)"})]})]}),(0,n.jsxs)("div",{style:{marginTop:"15px"},children:[(0,n.jsx)("strong",{children:"Score Distribution:"}),(0,n.jsxs)("div",{style:{display:"flex",height:"20px",backgroundColor:"#e9ecef",borderRadius:"10px",overflow:"hidden",marginTop:"8px"},children:[(0,n.jsx)("div",{style:{backgroundColor:"#28a745",width:"".concat(s.per_group.ragas.distribution.filter((function(e){return e>.7})).length/30*100,"%")}}),(0,n.jsx)("div",{style:{backgroundColor:"#ffc107",width:"".concat(s.per_group.ragas.distribution.filter((function(e){return e>.5&&e<=.7})).length/30*100,"%")}}),(0,n.jsx)("div",{style:{backgroundColor:"#dc3545",width:"".concat(s.per_group.ragas.distribution.filter((function(e){return e<=.5})).length/30*100,"%")}})]}),(0,n.jsxs)("div",{style:{fontSize:"0.8rem",color:"#666",marginTop:"5px"},children:[(0,n.jsx)("span",{style:{color:"#28a745"},children:"\u25a0 Good"})," ",(0,n.jsx)("span",{style:{color:"#ffc107"},children:"\u25a0 Weak"})," ",(0,n.jsx)("span",{style:{color:"#dc3545"},children:"\u25a0 Poor"})]})]})]})]})]}),(0,n.jsxs)("div",{className:"analysis-section",children:[(0,n.jsx)("h3",{children:"\ud83d\udd0d Per Question Analysis"}),(0,n.jsxs)("div",{style:{marginBottom:"20px",display:"flex",gap:"20px",alignItems:"center",flexWrap:"wrap"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Filter by Status:"}),(0,n.jsxs)("select",{value:k,onChange:function(e){return S(e.target.value)},className:"form-control",style:{width:"120px",marginLeft:"10px"},children:[(0,n.jsx)("option",{value:"all",children:"All"}),(0,n.jsx)("option",{value:"good",children:"Good"}),(0,n.jsx)("option",{value:"weak",children:"Weak"}),(0,n.jsx)("option",{value:"poor",children:"Poor"})]})]}),(0,n.jsx)("div",{children:(0,n.jsxs)("strong",{children:["Showing ",R.length," of ",s.per_question.length," questions"]})})]}),(0,n.jsxs)("table",{className:"table",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsxs)("th",{style:{cursor:"pointer"},onClick:function(){return A("source")},children:["Source ","source"===g&&("asc"===y?"\u2191":"\u2193")]}),(0,n.jsx)("th",{children:"Question"}),(0,n.jsxs)("th",{style:{cursor:"pointer"},onClick:function(){return A("similarity")},children:["Similarity ","similarity"===g&&("asc"===y?"\u2191":"\u2193")]}),(0,n.jsxs)("th",{style:{cursor:"pointer"},onClick:function(){return A("status")},children:["Status ","status"===g&&("asc"===y?"\u2191":"\u2193")]}),(0,n.jsx)("th",{children:"Retrieved Docs"}),(0,n.jsx)("th",{children:"Actions"})]})}),(0,n.jsx)("tbody",{children:R.map((function(e){return(0,n.jsxs)(l.Fragment,{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("span",{style:{backgroundColor:"llm"===e.source?"#007bff":"#28a745",color:"white",padding:"2px 8px",borderRadius:"4px",fontSize:"0.8rem",textTransform:"uppercase"},children:e.source})}),(0,n.jsx)("td",{style:{maxWidth:"300px"},children:e.text.length>100?e.text.substring(0,100)+"...":e.text}),(0,n.jsx)("td",{children:(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[e.similarity.toFixed(2),(0,n.jsx)("div",{className:"similarity-bar",children:(0,n.jsx)("div",{className:"similarity-fill ".concat(T(e.similarity)),style:{width:"".concat(100*e.similarity,"%")}})})]})}),(0,n.jsxs)("td",{children:[(0,n.jsx)("span",{className:"status-indicator status-".concat(e.status)}),(0,n.jsx)("span",{style:{textTransform:"uppercase",fontSize:"0.8rem",fontWeight:"bold"},children:e.status})]}),(0,n.jsx)("td",{children:e.retrieved_docs.length}),(0,n.jsx)("td",{children:(0,n.jsxs)("button",{className:"button",style:{padding:"4px 8px",fontSize:"0.8rem"},onClick:function(){return _(N===e.id?null:e.id)},children:[N===e.id?"Hide":"View"," Docs"]})})]}),N===e.id&&(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:6,style:{backgroundColor:"#f8f9fa",padding:"15px"},children:(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Full Question:"}),(0,n.jsx)("div",{style:{marginBottom:"15px",padding:"10px",backgroundColor:"white",borderRadius:"4px"},children:e.text}),(0,n.jsx)("strong",{children:"Retrieved Documents:"}),(0,n.jsx)("div",{style:{marginTop:"10px"},children:e.retrieved_docs.map((function(e,s){return(0,n.jsxs)("div",{style:{padding:"8px",backgroundColor:"white",marginBottom:"5px",borderRadius:"4px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsxs)("span",{children:[(0,n.jsx)("strong",{children:e.title})," (ID: ",e.doc_id,")"]}),(0,n.jsx)("span",{style:{color:T(e.similarity).includes("good")?"#28a745":T(e.similarity).includes("weak")?"#ffc107":"#dc3545",fontWeight:"bold"},children:e.similarity.toFixed(3)})]},s)}))})]})})})]},e.id)}))})]})]}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"30px"},children:[(0,n.jsx)("button",{className:"button button-secondary",onClick:function(){C.push("/experiment")},children:"\u2190 Back to Experiment"}),(0,n.jsx)("button",{className:"button",onClick:function(){C.push("/dashboard")},style:{backgroundColor:"#28a745"},children:"\ud83d\udd04 Run New Experiment"})]})]})})}},8469:function(e,s,t){"use strict";t.d(s,{TO:function(){return n},j9:function(){return l},nc:function(){return a},xn:function(){return o}});var r=t(9669),i=t.n(r)().create({baseURL:"/api",headers:{"Content-Type":"application/json"}}),n={getStatus:function(){return i.get("/corpus/status").then((function(e){return e.data}))}},l={getLLMQuestions:function(){return i.get("/questions/llm").then((function(e){return e.data}))},getRAGASQuestions:function(){return i.get("/questions/ragas").then((function(e){return e.data}))}},o={run:function(e){return i.post("/experiment/run",e).then((function(e){return e.data}))}},a={getAnalysis:function(){return i.get("/results/analysis").then((function(e){return e.data}))}}}},function(e){e.O(0,[48,774,888,179],(function(){return s=7592,e(e.s=s);var s}));var s=e.O();_N_E=s}]);